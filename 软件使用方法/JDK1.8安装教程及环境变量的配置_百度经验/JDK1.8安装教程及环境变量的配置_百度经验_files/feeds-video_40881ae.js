define("article:widget/exp-video/feeds-video/feeds-video.js",function(e,i,o){function d(e){var i=l(".feeds-video-list-item",x);l.each(i,function(i,o){l(o).on("click",function(){if(!l(o).hasClass("current")){{l(".feeds-video-list-item",x)}g=l(".feeds-video-list-item",x).eq(i).attr("vid"),e.playlistItem(i),p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"click-play",seedVid:m,alreadyPlay:V[i]||0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:i})}})}),x.on("click",".jw-icon-playback",function(){var i=e.getPlaylistIndex();setTimeout(function(){l(".jwplayer",x).hasClass("jw-state-paused")?p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-button-pause",seedVid:m,alreadyPlay:V[i]||0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:i}):p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-button-play",seedVid:m,alreadyPlay:V[i]||0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:i})},100)}),x.on("click",".jw-icon-volume",function(){var i=e.getPlaylistIndex(),o=e.getMute();p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-button-volume",seedVid:m,alreadyPlay:V[i]||0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:i,mute:o})}),x.on("mousedown",".scrollbar",function(){var i=e.getPlaylistIndex();p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-feeds-scrollbar-click",seedVid:m,alreadyPlay:V[i]||0,videoIndex:i,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),feedsVid:g})});var o=0;x.on("mouseleave",".feeds-video-list-ul",function(){o=0}),x.on("mousewheel",".feeds-video-list-ul",function(i,d){if(0===o){o=d;var t=e.getPlaylistIndex();p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-feeds-scrollbar-wheel",seedVid:m,alreadyPlay:V[t]||0,videoIndex:t,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),feedsVid:g})}})}function t(e){function i(){l(".feeds-video-loading-cover").animate({width:0},2e3,function(){l(".feeds-video-loading-cover").css({width:"100%"})})}var o=(l("#feeds-video-play-box"),l(".feeds-video-loading",x)),t=(setInterval(i,100),[]);l.each(e.videoList,function(e,i){t.push({image:i.coverUrl,sources:[{file:i.playUrl}]})}),u=window.cyberplayer("feeds-video-play-container").setup({flashplayer:c.cyberplayer,width:448,height:252,autostart:!1,stretching:"uniform",volume:50,controls:!0,repeat:!0,starttime:0,playlist:t,preload:"auto",ak:"b9855350588c4b63b127cebd1d1d252b"}),u.on("ready",function(){setTimeout(function(){u.setMute(!0),u.play(),p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"auto-play",seedVid:m,alreadyPlay:0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:0})},1500),l(".jw-text-duration",x).text("00:00")}).on("pause",function(){l(".feeds-video-play-box").removeClass("playing").addClass("pause")}).on("play",function(){l(".feeds-video-play-box").removeClass("pause complete").addClass("playing");var e=u.getPosition(),i=u.getDuration(),o=u.getPlaylistIndex();p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-play",seedVid:m,videoIndex:o,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),alreadyPlay:V[o]||0,feedsVid:g,playTime:e,videoDuration:i}),V[o]=1}).on("complete",function(){h=!1,l(".feeds-video-play-box").removeClass("playing").addClass("complete");var e=l(".feeds-video-list-item",x),i=e.length,o=u.getPlaylistIndex(),d=o+1;d=d>=i?0:d;var t=u.getDuration();p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"play-end-100",seedVid:m,videoIndex:o,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),alreadyPlay:V[o]||0,feedsVid:g,videoDuration:t}),g=l(".feeds-video-list-item",x).eq(d).attr("vid"),p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"auto-play",seedVid:m,alreadyPlay:V[d]||0,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:d})}).on("playlistItem",function(){o.show();var e=u.getPlaylistIndex();g=l(".feeds-video-list-item",x).eq(e).attr("vid");var i=l(".feeds-video-list-item",x);i.removeClass("current").eq(e).addClass("current")}).on("error",function(){o.hide(),l(".jw-title",x).text("哎呀，视频出错啦，请刷新页面，重新开始播放视频").show(),l(".jw-text-duration",x).text("00:00")}).on("playlistComplete",function(){}).on("ended",function(){o.show()}).on("time",function(e){var i=l(".jw-title",x);if(e.position>0){if(o.hide(),e.position<.2){var d=92.5,t=u.getPlaylistIndex();0===t?d=100:1===t?d=97.5:2===t&&(d=95),i.text("为您找到与问题匹配度"+d+"%的视频").show(),setTimeout(function(){i.hide()},2500)}var n=parseInt(u.getDuration()-e.position,10);5>=n&&n>0?i.text(n+"秒后即将播放下一条视频").show():e.position>=0&&-1!==i.text().indexOf("将播放下一条视频")&&i.hide();var a=e.position,s=u.getDuration(),r=Math.floor(.8*s);if(a>=r){if(h)return;p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"play-end-80",seedVid:m,encEid:F.context("eid"),feedsVid:g,intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),videoIndex:u.getPlaylistIndex(),videoDuration:s}),h=!0}else h=!1}}).on("fullscreen",function(e){if(e.fullscreen){var i=u.getPosition(),o=u.getDuration(),d=u.getPlaylistIndex();p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"video-button-fullscreen",seedVid:m,videoIndex:d,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),alreadyPlay:V[d]||0,feedsVid:g,playTime:i,videoDuration:o})}}).on("mediaError",function(){l(".jwplayer",x).addClass("jw-state-error"),l(".jw-title",x).text("哎呀，网络连接断了，请重连网络后刷新页面，重新开始播放视频").show()}),d(u)}function n(){v=new f({scrollWrapper:l("#feeds-video-list-box"),scrollContent:l("#feeds-video-list-ul"),maxHeight:228,autoHide:0}),v.render()}function a(){if(u){var e=l(".video-originate-container")[0];if(l(window).scrollTop()>l(".feeds-video-play-box").offset().top+280){l(".feeds-video-play-box").addClass("miniVideo");var i=r.dom.q("content-container")[0],o=parseInt(r.dom.getCurrentStyle(i,"width"),10),d=(Math.max(r.page.getViewHeight(),434),r.page.getViewWidth()),t=Math.max((d-o)/2,60)-60;r.dom.fixable(e,{vertival:"bottom",horizontal:"right",offset:{x:t+60,y:10},autofix:!0}),e.style.display="block"}else e.style.position="static",l(".feeds-video-play-box").removeClass("miniVideo")}}function s(e){var i=window.navigator.userAgent.toLowerCase();if((i.match(/msie\s\d+/)&&i.match(/msie\s\d+/)[0]||i.match(/trident\s?\d+/)&&i.match(/trident\s?\d+/)[0])&&(window.ieVersion=i.match(/msie\s\d+/)[0].match(/\d+/)[0]||i.match(/trident\s?\d+/)[0],window.ieVersion<=8)){var o=['<div class="feeds-video-play-ie">','<div class="feeds-video-play-ie-icon"></div>','<div class="feeds-video-play-ie-text">',"<p>哎呀，当前浏览器无法播放该视频，</p>","<p>请升级到最新版本的浏览器。</p>","</div>",'<a class="feeds-video-play-ie-tip" href="/article/fdbd4277c385f2b89e3f488c.html" target="_blank">',"如何升级</a>","</div>"].join("");return l(".feeds-video-play-box").html(o),void p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"page-show",ifie:1,seedVid:m,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),feedsVid:g})}var d=y.find(".feeds-video-list-item-0").attr("vid");g=m=d,F.context("feedVideoGroup",y.attr("feed-group")),p.send(location.href,2019,{module:"article",page:"index",pos:"video-feeds",action:"page-show",seedVid:m,encEid:F.context("eid"),intention:"video-feeds-log",feedVideoGroup:F.context("feedVideoGroup"),feedsVid:g}),t(e),n();var s=l(".video-originate-container");l(".video-mini-back",s).on("click",function(e){e.preventDefault(),l("html, body").animate({scrollTop:l(".feeds-video-play-box").offset().top-64},500)}),l(".video-mini-pause",s).on("click",function(e){e.preventDefault(),u&&u.pause()}),l(".video-mini-replay",s).on("click",function(e){e.preventDefault(),u&&u.play()}),l(".video-mini-play",s).on("click",function(e){e.preventDefault(),u&&u.play()}),l(window).on("scroll resize",a)}var l=e("common-jquery:widget/lib/jquery/jquery.js"),r=e("common:widget/lib/tangram/base/base.js"),c=e("common-jquery:widget/js/util/uri/uri.js"),f=e("common-jquery:widget/js/ui/scrollbar/scrollbar.js");e("common-jquery:widget/lib/jquery.ui/jquery.ui.mousewheel.js");var u,v,p=e("common-jquery:widget/js/logic/log/log.js"),x=l(".feeds-video-box"),y=l(".feeds-video-list-ul"),m=0,g=F.context("feedsVid"),V={},h=!1;o.exports.init=s});